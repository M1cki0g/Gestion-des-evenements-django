{% extends 'based.html' %}

{% block title %}Tableau de bord{% endblock %}

{% block content %}
<h2>Bienvenue, {{ user.username }}</h2>
<p class="text-muted mb-4">Suivez les activités clés de votre plateforme.</p>

<!-- Cartes Résumé -->
<div class="row g-4 mb-5">
  <div class="col-12 col-sm-6 col-md-4">
    <div class="card text-center shadow-sm p-3 h-100">
      <div class="card-body d-flex flex-column justify-content-center">
        <div class="mb-2">
          <i class="bi bi-people-fill fs-1 text-primary"></i>
        </div>
        <h5 class="card-title">Utilisateurs</h5>
        <p class="card-text fs-4">{{ nb_users }}</p>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-6 col-md-4">
    <div class="card text-center shadow-sm p-3 h-100">
      <div class="card-body d-flex flex-column justify-content-center">
        <div class="mb-2">
          <i class="bi bi-calendar-event-fill fs-1 text-success"></i>
        </div>
        <h5 class="card-title">Événements</h5>
        <p class="card-text fs-4">{{ nb_events }}</p>
      </div>
    </div>
  </div>

  <div class="col-12 col-sm-6 col-md-4">
    <div class="card text-center shadow-sm p-3 h-100">
      <div class="card-body d-flex flex-column justify-content-center">
        <div class="mb-2">
          <i class="bi bi-people fs-1 text-warning"></i>
        </div>
        <h5 class="card-title">Participations</h5>
        <p class="card-text fs-4">{{ nb_participations }}</p>
      </div>
    </div>
  </div>
</div>

<!-- Graphique -->
<div class="card p-4 shadow-sm">
  <h5 class="mb-3">Vue du site cette semaine</h5>
  <canvas id="siteViews"></canvas>
</div>

{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("siteViews");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"],
      datasets: [{
        label: "Vues",
        data: [12, 19, 3, 5, 2, 3, 9],
        backgroundColor: "#0d6efd",
      }]
    }
  });
</script>
{% endblock %}
